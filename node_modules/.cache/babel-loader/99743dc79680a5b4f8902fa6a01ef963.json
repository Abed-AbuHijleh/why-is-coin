{"ast":null,"code":"import _regeneratorRuntime from\"/Users/abed/Documents/Productivity/why-is-coin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/abed/Documents/Productivity/why-is-coin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/abed/Documents/Productivity/why-is-coin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import TopSearch from'../components/top-search/top-search.jsx';import HomePreview from'../components/home-preview/home-preview.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),total=_useState6[0],setTotal=_useState6[1];var query=new URLSearchParams(useLocation().search);var page=parseInt(query.get('page')||'1',10);var rowsPerPage=100;var fetchHomeData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(start,end){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return new XMLHttpRequest();case 2:res=_context.sent;res.onload=apiSucc;res.onerror=console.log();res.open('GET','https://why-is-coin-api.herokuapp.com/data/latest?start='+start+'&end='+end);res.send();case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchHomeData(_x,_x2){return _ref.apply(this,arguments);};}();function apiSucc(){try{setTotal(JSON.parse(this.responseText)[0].total);setData(JSON.parse(this.responseText));setLoading(false);}catch(e){console.log(e);}}useEffect(function(){fetchHomeData((page-1)*rowsPerPage+1,page*rowsPerPage);// eslint-disable-next-line\n},[]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(TopSearch,{data:data,loading:loading,home:true}),/*#__PURE__*/_jsx(HomePreview,{data:data,loading:loading,total:total,rowsPerPage:rowsPerPage,page:page,fetchHomeData:fetchHomeData})]});};export default Home;","map":{"version":3,"sources":["/Users/abed/Documents/Productivity/why-is-coin/src/layouts/home.jsx"],"names":["React","useEffect","useState","useLocation","TopSearch","HomePreview","Home","loading","setLoading","data","setData","total","setTotal","query","URLSearchParams","search","page","parseInt","get","rowsPerPage","fetchHomeData","start","end","XMLHttpRequest","res","onload","apiSucc","onerror","console","log","open","send","JSON","parse","responseText","e"],"mappings":"4eAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,MAAOC,CAAAA,SAAP,KAAsB,yCAAtB,CACA,MAAOC,CAAAA,WAAP,KAAwB,6CAAxB,C,wFAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACjB,cAA8BJ,QAAQ,CAAC,IAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,eAAwBN,QAAQ,CAAC,EAAD,CAAhC,yCAAOO,IAAP,eAAaC,OAAb,eACA,eAA0BR,QAAQ,CAAC,CAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eAEA,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,eAAJ,CAAoBX,WAAW,GAAGY,MAAlC,CAAd,CACA,GAAMC,CAAAA,IAAI,CAAGC,QAAQ,CAACJ,KAAK,CAACK,GAAN,CAAU,MAAV,GAAqB,GAAtB,CAA2B,EAA3B,CAArB,CACA,GAAMC,CAAAA,WAAW,CAAG,GAApB,CAEA,GAAMC,CAAAA,aAAa,0FAAG,iBAAOC,KAAP,CAAcC,GAAd,gJACJ,IAAIC,CAAAA,cAAJ,EADI,QAChBC,GADgB,eAEpBA,GAAG,CAACC,MAAJ,CAAaC,OAAb,CACAF,GAAG,CAACG,OAAJ,CAAcC,OAAO,CAACC,GAAR,EAAd,CACAL,GAAG,CAACM,IAAJ,CACE,KADF,CAEE,2DAA6DT,KAA7D,CAAqE,OAArE,CAA+EC,GAFjF,EAIAE,GAAG,CAACO,IAAJ,GARoB,sDAAH,kBAAbX,CAAAA,aAAa,gDAAnB,CAWA,QAASM,CAAAA,OAAT,EAAmB,CACjB,GAAI,CACFd,QAAQ,CAACoB,IAAI,CAACC,KAAL,CAAW,KAAKC,YAAhB,EAA8B,CAA9B,EAAiCvB,KAAlC,CAAR,CACAD,OAAO,CAACsB,IAAI,CAACC,KAAL,CAAW,KAAKC,YAAhB,CAAD,CAAP,CACA1B,UAAU,CAAC,KAAD,CAAV,CACD,CAAC,MAAO2B,CAAP,CAAU,CACVP,OAAO,CAACC,GAAR,CAAYM,CAAZ,EACD,CACF,CAEDlC,SAAS,CAAC,UAAM,CACdmB,aAAa,CAAC,CAACJ,IAAI,CAAG,CAAR,EAAaG,WAAb,CAA2B,CAA5B,CAA+BH,IAAI,CAAGG,WAAtC,CAAb,CACA;AACD,CAHQ,CAGN,EAHM,CAAT,CAKA,mBACE,MAAC,KAAD,CAAO,QAAP,yBACE,KAAC,SAAD,EAAW,IAAI,CAAEV,IAAjB,CAAuB,OAAO,CAAEF,OAAhC,CAAyC,IAAI,CAAE,IAA/C,EADF,cAEE,KAAC,WAAD,EACE,IAAI,CAAEE,IADR,CAEE,OAAO,CAAEF,OAFX,CAGE,KAAK,CAAEI,KAHT,CAIE,WAAW,CAAEQ,WAJf,CAKE,IAAI,CAAEH,IALR,CAME,aAAa,CAAEI,aANjB,EAFF,GADF,CAaD,CAhDD,CAkDA,cAAed,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useLocation } from 'react-router-dom'\n\nimport TopSearch from '../components/top-search/top-search.jsx'\nimport HomePreview from '../components/home-preview/home-preview.jsx'\n\nconst Home = () => {\n  const [loading, setLoading] = useState(true)\n  const [data, setData] = useState([])\n  const [total, setTotal] = useState(0)\n\n  const query = new URLSearchParams(useLocation().search)\n  const page = parseInt(query.get('page') || '1', 10)\n  const rowsPerPage = 100\n\n  const fetchHomeData = async (start, end) => {\n    let res = await new XMLHttpRequest()\n    res.onload = apiSucc\n    res.onerror = console.log()\n    res.open(\n      'GET',\n      'https://why-is-coin-api.herokuapp.com/data/latest?start=' + start + '&end=' + end,\n    )\n    res.send()\n  }\n\n  function apiSucc() {\n    try {\n      setTotal(JSON.parse(this.responseText)[0].total)\n      setData(JSON.parse(this.responseText))\n      setLoading(false)\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  useEffect(() => {\n    fetchHomeData((page - 1) * rowsPerPage + 1, page * rowsPerPage)\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <React.Fragment>\n      <TopSearch data={data} loading={loading} home={true} />\n      <HomePreview\n        data={data}\n        loading={loading}\n        total={total}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        fetchHomeData={fetchHomeData}\n      />\n    </React.Fragment>\n  )\n}\n\nexport default Home\n"]},"metadata":{},"sourceType":"module"}